@{ Layout = "~/Views/Shared/_LayoutMain.cshtml";
                var subject = (AAL_ADMIN.Models.MSubject)ViewBag.subject;
                var topics = (PagedList.Core.IPagedList<AAL_ADMIN.Models.MTopics>)ViewBag.topics; }

<div class="container">
    <div class="row">

        <div class="col-md-12">
            <ul class="nav nav-tabs mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" data-toggle="pill" href="#pills-1" role="tab" aria-controls="pills-1" aria-selected="true">Basic</a>
                </li>
                <li class="nav-item" role="presentation" id="topics">
                    <a class="nav-link" data-toggle="pill" href="#pills-2" role="tab" aria-selected="false">Topics</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active" id="pills-1" role="tabpanel">
                    <form action="~/Subjects/CreateSubject" method="post">
                        <input type="hidden" name="Id" value="@subject.Id" class="form-control" required>
                        @*row*@
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label><span style="color:red">*</span> Title</label>
                                    <input name="SubjectTitle" value="@subject.SubjectTitle" type="text" class="form-control" required>
                                </div>
                            </div>
                        </div>
                        @*row*@
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label><span style="color:red">*</span> Description</label>
                                    <textarea name="SubjectDescription" type="text" class="form-control" required>@subject.SubjectDescription</textarea>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <button type="submit" class="btn btn-primary">Submit</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="tab-pane fade" id="pills-2" role="tabpanel">
                    
                    <div class="row">
                        <div class="col-md-12" id="clients">
                            <table id="dt" class="table tblsm">
                                <thead>
                                    <tr>
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>Tags</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in topics)
                                    {
                        <tr>
                            <td title="@item.TopicTitle">@item.TopicTitle</td>
                            <td title="@item.TopicDescription">@item.TopicDescription</td>
                            <td title="@item.Tags">@item.Tags</td>
                            <td>
                                <a href="javascript:void(0);" style="color:red;" onclick="confirm_delete('@item.Id')">
                                    Delete
                                </a>
                            </td>
                        </tr>}
                                </tbody>
                            </table>
                            <pager class="pager-container"
                                   list="@topics"
                                   options="@PagedList.Core.Mvc.PagedListRenderOptions.Bootstrap4PageNumbersOnly"
                                   asp-action="CreateSubject?id=@subject.Id"
                                   asp-controller="Subjects" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
    Launch demo modal
</button>

<!-- Modal -->
<div class="modal fade" id="modal_add_topic" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="~/Subjects/CreateTopic" method="post">
                    <input type="hidden" name="SubjectIdFk" value="@subject.Id" />
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label><span style="color:red">*</span> Title</label>
                                <input name="TopicTitle" placeholder="Topic" type="text" class="form-control" required>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label><span style="color:red">*</span> Description</label>
                                <input name="TopicDescription" placeholder="Description" type="text" class="form-control" required>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="form-group">
                                <label><span style="color:red">*</span> Tags</label>
                                <input name="Tags" placeholder="Tags - seperate by comma" type="text" class="form-control" required>
                            </div>
                        </div>
                        <div class="col-md-1">
                            <button type="submit" class="btn btn-primary btn-sm">submit</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>

<script>
    function confirm_delete(id) {
        $.confirm({
            title: 'Information',
            type: "red",
            content: 'Delete this Topic?',
            buttons: {
                Yes: function () {
                    window.location = '@Url.Content("~/Subjects/DeleteTopic/")'+ id;
                },
                No: function () {
                },
            }
        });
    }
</script>

<script>
    $(document).ready(function () {
        // open specific tab
        var hash = location.hash.replace(/^#/, '');
        if (hash) {
            $('.nav-tabs a[href="#' + hash + '"]').tab('show');
        }

        // Change hash for page-reload
        $('.nav-tabs a').on('shown.bs.tab', function (e) {
            window.location.hash = e.target.hash;
        })
    });
</script>
